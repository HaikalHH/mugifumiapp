generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Product {
  id        Int         @id @default(autoincrement())
  code      String      @unique
  name      String
  price     Int
  hppPct    Float
  hppValue  Int
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
  inventory Inventory[]
  sales     SaleItem[]

  @@map("Product") // mapping ke tabel di Supabase
}

model Inventory {
  id        Int      @id @default(autoincrement())
  barcode   String   @unique
  location  String
  productId Int
  createdAt DateTime @default(now())
  status    String   @default("READY")
  product   Product  @relation(fields: [productId], references: [id])

  @@map("Inventory")
}

model Sale {
  id             Int        @id @default(autoincrement())
  outlet         String
  customer       String?
  status         String     @default("ordered")
  orderDate      DateTime
  shipDate       DateTime?
  estPayout      Int?
  actPayout      Int?
  location       String
  discount       Float?
  actualReceived Int?
  createdAt      DateTime   @default(now())
  items          SaleItem[]

  @@map("Sale")
}

model SaleItem {
  id        Int     @id @default(autoincrement())
  saleId    Int
  productId Int
  barcode   String
  price     Int
  status    String?
  product   Product @relation(fields: [productId], references: [id])
  sale      Sale    @relation(fields: [saleId], references: [id])

  @@map("SaleItem")
}

